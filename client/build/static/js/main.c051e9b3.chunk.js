(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},117:function(e,t,a){e.exports=a(241)},197:function(e,t,a){},199:function(e,t,a){},231:function(e,t,a){},235:function(e,t,a){},237:function(e,t,a){},239:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(109),o=a.n(r),c=a(31),i=a(13),s=a(19),m=a(15),u=a(14),d=a(16),p=a(249),h=a(242),E=a(250),b=a(243),g=a(244),v=function(e){return l.a.createElement(p.a,{inverse:!0,collapseOnSelect:!0},l.a.createElement(p.a.Header,null,l.a.createElement(p.a.Brand,null,l.a.createElement("a",{href:"#brand"},sessionStorage.getItem("username"))),l.a.createElement(p.a.Toggle,null)),l.a.createElement(p.a.Collapse,null,l.a.createElement(h.a,null,l.a.createElement(E.a,{eventKey:1,title:"Work Stations",id:"basic-nav-dropdown"},e.stations.map(function(t){return l.a.createElement(b.a,{"data-id":t.id,key:t.id,onClick:e.handleStationSelect},t.name)}))),l.a.createElement(h.a,{pullRight:!0},l.a.createElement(g.a,{eventKey:2,href:"#logout",onClick:e.handleLogout},"Logout"))))},f=a(8),S=a.n(f),y=(a(197),function(e){return l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"thumbnail card"},l.a.createElement("div",{className:"caption"},l.a.createElement("h2",{className:"card-title"},e.title),l.a.createElement("h4",null,"Quantity: ",e.quantity),l.a.createElement("p",{className:"card-text"},l.a.createElement("strong",null,"Notes: "),e.text),l.a.createElement("button",{value:e.id,type:"button",className:"btn btn-success",onClick:e.handleJobStart,"data-id":e.id},"Start"))))}),k=a(248),N=a(245),w=(a(199),a(45));a(59);var O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleStationSelect=function(e){S.a.get("/api/v1/workorders/active/".concat(e.target.getAttribute("data-id"))).then(function(e){var t=[];e.data.forEach(function(e){return t.push(Object(c.a)({},e,{inProgress:!1}))}),a.setState({workOrders:t})})},a.handleLogout=function(){S.a.post("/api/v1/auth/logout").then(function(e){!0===e.data.signedOut&&(sessionStorage.clear(),window.location.replace("/"))})},a.handleJobStart=function(e){var t=e.target.getAttribute("data-id"),n=a.state.workOrders.slice(0),l={};n.forEach(function(e){e.id===t&&Object.assign(l,e)}),a.setState({currentWorkOrder:l,clock:l.currentStation.time?l.currentStation.time:0,modalShow:!0},function(){var e=setInterval(function(){a.setState(function(e){return{clock:e.clock+1}})},1e3);a.setState({clockInterval:e})})},a.handleJobFinish=function(e){clearInterval(a.state.clockInterval);var t={};Object.assign(t,a.state.currentWorkOrder),t.currentStation.time=a.state.clock,S.a.put("api/v1/workorders/next",{currentWorkOrder:t,uid:sessionStorage.getItem("uid"),username:sessionStorage.getItem("username")}).then(function(e){console.log(e.data),S.a.get("/api/v1/workorders/active/".concat(a.state.currentWorkOrder.currentStation.id)).then(function(e){a.setState({workOrders:e.data,modalShow:!1,clock:0})})})},a.handleJobStop=function(e){clearInterval(a.state.clockInterval);var t={};Object.assign(t,a.state.currentWorkOrder.currentStation),t.time=a.state.clock,S.a.put("/api/v1/workorders/update/".concat(a.state.currentWorkOrder.id),{currentStation:t,uid:sessionStorage.getItem("uid"),username:sessionStorage.getItem("username")}).then(function(){S.a.get("/api/v1/workorders/active/".concat(t.id)).then(function(e){a.setState({workOrders:e.data,modalShow:!1})})})},a.viewAttachment=function(e){w.storage().ref(e.target.getAttribute("data-filepath")).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.state={stations:[],workOrders:[],isLoggedIn:!1,clockInterval:0,clock:0,currentWorkOrder:{},modalShow:!1},S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data})}),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.a.post("/api/v1/auth/verify",{token:sessionStorage.getItem("token")}).then(function(t){t.data.uid===sessionStorage.getItem("uid")?e.setState({isLoggedIn:!0}):sessionStorage.clear()}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return this.state.isLoggedIn?l.a.createElement("div",{className:"b"},l.a.createElement(v,{stations:this.state.stations,handleStationSelect:this.handleStationSelect,handleLogout:this.handleLogout}),l.a.createElement("div",{className:"container"},this.state.workOrders.map(function(t){return l.a.createElement(y,{key:t.id,id:t.id,handleJobStart:e.handleJobStart,text:t.notes,title:t.part.name,quantity:t.quantity})})),l.a.createElement(k.a,{show:this.state.modalShow},l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Title,null,"Part: ",this.state.currentWorkOrder.id?this.state.currentWorkOrder.part.name:""),l.a.createElement("h3",null,function(e){var t=0,a=0,n=0;return(t=Math.floor(e/60/60))<10&&(t="0".concat(t)),(a=e>=3600?Math.floor(e%3600/60):Math.floor(e/60))<10&&(a="0".concat(a)),(n=e%60)<10&&(n="0".concat(n)),"".concat(t,":").concat(a,":").concat(n)}(this.state.clock))),l.a.createElement(k.a.Body,null,l.a.createElement("h4",null,"Quantity: ",this.state.currentWorkOrder.id?this.state.currentWorkOrder.quantity:"")),l.a.createElement(k.a.Footer,null,l.a.createElement("button",{className:"btn btn-primary","data-filepath":this.state.currentWorkOrder.id?"".concat(this.state.currentWorkOrder.part.id,"/").concat(this.state.currentWorkOrder.part.filename):"",onClick:this.viewAttachment},"View Attachment"),l.a.createElement("button",{className:"btn btn-danger",onClick:this.handleJobStop},"Stop"),l.a.createElement("button",{className:"btn btn-success",onClick:this.handleJobFinish},"Finish Job")))):l.a.createElement("div",null,l.a.createElement("h1",null,"You are not logged in"),l.a.createElement(N.a,{to:"/"},"login"))}}]),t}(l.a.Component),j=a(253),C=a(254),I=a(255),A=a(246),M=a(247),x=a(251),P=(a(107),a(45));a(59);var B=function(e){return l.a.createElement("div",null,l.a.createElement("h2",null,l.a.createElement("span",{className:"label label-primary",style:{float:"left",marginRight:"7px"}},e.stationName)),l.a.createElement("button",{"data-id":e.id,className:"btn btn-danger",onClick:e.removeStation},"x"))},D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data,selectedStation:e.data[0],loaded:!0})})},a.componentDidMount=function(){var e=sessionStorage.getItem("editPart");"false"!==e&&e&&(e=JSON.parse(e),a.setState({part:e},function(){document.getElementById("part-id").value=a.state.part.id,document.getElementById("part-name").value=a.state.part.name})),sessionStorage.setItem("editPart",!1)},a.removeStation=function(e){e.preventDefault();var t=e.target.getAttribute("data-id"),n=Object.assign(a.state.part),l=a.state.part.stations.slice(0);l.forEach(function(e,a){e.id===t&&l.splice(a,1)}),n.stations=l,a.setState({part:n})},a.showModal=function(){return a.setState({showModal:!0})},a.hideModal=function(){return a.setState({showModal:!1})},a.handleSelectChange=function(e){var t=e.target.value,n=e.target.children[e.target.selectedIndex].text;a.setState({selectedStation:{id:t,name:n}})},a.addStation=function(){var e=Object.assign(a.state.part);e.stations.push(a.state.selectedStation),a.setState({part:e,showModal:!1,selectedStation:a.state.stations[0]})},a.handleInput=function(e){var t=e.target.name,n=Object.assign(a.state.part);n[t]=e.target.value,a.setState({part:n})},a.clear=function(){document.getElementById("part-id").value="",document.getElementById("attachment").value="",document.getElementById("part-name").value="",a.setState({part:{id:"",stations:[]}})},a.handleSubmit=function(){if(a.state.part.stations.length<1)console.log("Please select a minimum of one station");else{var e=document.getElementById("attachment").files[0];if(void 0!==e){var t=new FileReader;t.onloadend=function(t){var n=new Blob([t.target.result],{type:e.type});S.a.post("/api/v1/parts/create",{part:Object(c.a)({},a.state.part,{filename:e.name})}).then(function(t){a.clear(),P.storage().ref("/".concat(t.data.newPartID,"/").concat(e.name)).put(n).then(function(){return console.log("success")},function(){return console.log("error")})})},t.readAsArrayBuffer(e)}else S.a.post("/api/v1/parts/create",{part:Object(c.a)({},a.state.part,{filename:"no file"})}).then(function(e){return a.clear()}).catch(function(e){return console.log(e)})}},a.render=function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("form",{id:"part-form",action:"/api/v1/parts/test",method:"POST"},l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"part-number-addon"},"Part ID"),l.a.createElement("input",{name:"id",id:"part-id",onChange:a.handleInput,type:"text",className:"form-control",placeholder:"If left blank an ID will be auto-generated","aria-describedby":"part-number-addon"})),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"part-name-addon"},"Part Name"),l.a.createElement("input",{name:"name",id:"part-name",onChange:a.handleInput,type:"text",className:"form-control"})),l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{name:"doc",id:"attachment",onChange:a.handleInput,type:"file",className:"form-control","aria-describedby":"part-document-addon"})),a.state.part.stations?a.state.part.stations.map(function(e,t){return l.a.createElement(B,{key:t,stationName:e.name,id:e.id,removeStation:a.removeStation})}):""),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-success",onClick:a.showModal},"Add Station"),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("button",{className:"btn btn-success",onClick:a.handleSubmit},"Submit"),l.a.createElement("button",{className:"btn btn-danger",onClick:a.clear},"Clear"),l.a.createElement(k.a,{show:a.state.showModal},l.a.createElement(k.a.Title,null,"Select a Station"),l.a.createElement(A.a,null,l.a.createElement(M.a,null,"Stations"),l.a.createElement(x.a,{componentClass:"select",placeholder:"Select a station",onChange:a.handleSelectChange},a.state.loaded?a.state.stations.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)}):"Loading ...")),l.a.createElement(A.a,null,l.a.createElement("button",{className:"btn btn-success",onClick:a.addStation},"OK"),l.a.createElement("button",{className:"btn btn-danger",onClick:a.hideModal},"Cancel"))))))},a.state={selectedStation:{},stations:[],part:{id:"",name:"",doc:"",stations:[]},showModal:!1,loaded:!1},a}return Object(d.a)(t,e),t}(l.a.Component),W=a(45);a(59),a(108);W.initializeApp({apiKey:"AIzaSyAZB-qbjpKVRvaQt17kPsPTMav3O12by6k",authDomain:"project-runner-f1bdc.firebaseapp.com",databaseURL:"https://project-runner-f1bdc.firebaseio.com",projectId:"project-runner-f1bdc",storageBucket:"project-runner-f1bdc.appspot.com",messagingSenderId:"757776283780"});var T=function(e){return l.a.createElement("div",{className:"row"},e.parts.map(function(t,a){return l.a.createElement(L,{key:a,title:t.name,stations:t.stations,filepath:t.filepath,viewAttachment:e.viewAttachment,handleEdit:e.handleEdit,id:t.id,handleDelete:e.handleDelete})}))},L=function(e){return l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"thumbnail"},l.a.createElement("div",{className:"caption"},l.a.createElement("h3",{className:"card-title"},e.title),l.a.createElement("p",null,l.a.createElement("strong",null,"Stations: ")),e.stations.map(function(e,t){return l.a.createElement("p",{key:"".concat(e.id).concat(t)},e.name)}),l.a.createElement("button",{className:"btn btn-primary","data-filepath":e.filepath,onClick:e.viewAttachment},"View Attachment"),l.a.createElement("button",{style:{marginLeft:"10px"},className:"btn btn-warning","data-id":e.id,onClick:e.handleEdit},"Edit"),l.a.createElement("button",{style:{marginLeft:"10px"},className:"btn btn-danger","data-id":e.id,onClick:e.handleDelete},"Delete"))))},J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){S.a.get("/api/v1/parts/all").then(function(e){return a.setState({parts:e.data})})},a.componentDidMount=function(){var e=setInterval(function(){S.a.get("/api/v1/parts/all").then(function(e){return a.setState({parts:e.data})})},15e3);a.setState({interval:e})},a.componentWillUnmount=function(){clearInterval(a.state.interval)},a.handleTabSelect=function(e){for(var t=e.target,a=document.getElementsByClassName("tab-link"),n=0;n<a.length;n++)a[n].setAttribute("class","tab-link");t.parentElement.setAttribute("class","active tab-link")},a.viewAttachment=function(e){W.storage().ref(e.target.getAttribute("data-filepath")).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.handleEdit=function(e){var t=e.target.getAttribute("data-id");S.a.get("/api/v1/parts/edit/".concat(t)).then(function(e){sessionStorage.setItem("editPart",JSON.stringify(e.data)),document.getElementById("create-link").click()})},a.handleDelete=function(e){var t=e.target.getAttribute("data-id");S.a.put("/api/v1/parts/archive/".concat(t)).then(function(e){S.a.get("/api/v1/parts/all").then(function(e){return a.setState({parts:e.data})})})},a.render=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("ul",{className:"nav nav-pills"},l.a.createElement("li",{role:"presentation",className:"active tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{to:"/admin/parts/view"},"View")),l.a.createElement("li",{role:"presentation",className:"tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{id:"create-link",to:"/admin/parts/create"},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{path:"/admin/parts/create",component:D}),l.a.createElement(I.a,{path:"/admin/parts/view",component:function(){return l.a.createElement(T,{parts:a.state.parts,viewAttachment:a.viewAttachment,handleEdit:a.handleEdit,handleDelete:a.handleDelete})}}))},a.state={parts:[],interval:0},a}return Object(d.a)(t,e),t}(l.a.Component),q=a(42),R=a.n(q),H=a(66),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSelectChange=function(e){var t=e.target.value,n=e.target.children[e.target.selectedIndex].text;a.setState({selectedStation:{id:t,name:n}})},a.addEmployee=function(){var e=Object.assign(a.state.employee);a.setState({employee:e,showModal:!1})},a.handleInput=function(e){var t=e.target.name,n=Object.assign(a.state.employee);n[t]=e.target.value,a.setState({employee:n})},a.clear=function(){document.getElementById("employee-id").value="",a.setState({employee:{id:""}})},a.handleSubmit=Object(H.a)(R.a.mark(function e(){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.state.employee),!(a.state.employee.name.length<1)){e.next=6;break}return console.log("Name your employee before submitting"),e.abrupt("return");case 6:S.a.post("/api/v1/auth/create",{employee:Object(c.a)({},a.state.employee)}).then(function(){document.getElementById("employee-id").value="",document.getElementById("employee-name").value="",document.getElementById("employee-email").value="",document.getElementById("employee-password").value=""}).catch(function(e){return console.log(e)});case 7:case"end":return e.stop()}},e,this)})),a.state={employee:{id:"",name:"",email:"",password:""}},S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data,selectedStation:e.data[0]})}),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("form",{id:"employee-form",action:"/api/v1/employees/test",method:"POST"},l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"employee-number-addon"},"Employee ID"),l.a.createElement("input",{name:"id",id:"employee-id",onChange:this.handleInput,type:"text",className:"form-control",placeholder:"If left blank an ID will be auto-generated","aria-describedby":"employee-number-addon"})),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"employee-name-addon"},"Employee Name"),l.a.createElement("input",{name:"name",id:"employee-name",onChange:this.handleInput,type:"text",className:"form-control",placeholder:"First and Last Name","aria-describedby":"part-name-addon"})),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"employee-email-addon"},"Employee Email"),l.a.createElement("input",{name:"email",id:"employee-email",onChange:this.handleInput,type:"email",className:"form-control",placeholder:"Email","aria-describedby":"part-email-addon"})),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"employee-password-addon"},"Employee Password"),l.a.createElement("input",{name:"password",id:"employee-password",onChange:this.handleInput,type:"password",className:"form-control",placeholder:"Password (minimum 6 characters)","aria-describedby":"part-password-addon"}))),l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("button",{className:"btn btn-success",onClick:this.handleSubmit},"Submit"),l.a.createElement("button",{className:"btn btn-danger",onClick:this.clear},"Clear"))))}}]),t}(l.a.Component),F=function(e){return l.a.createElement("div",{className:"row"},e.employees.map(function(t){return l.a.createElement(V,{key:t.id,title:t.name,id:t.id,email:t.email,isAdmin:t.isAdmin,handleTogglePermission:e.handleTogglePermission,handleDelete:e.handleDelete})}))},V=function(e){return l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"thumbnail"},l.a.createElement("div",{className:"caption"},l.a.createElement("h3",{className:"card-title"},e.title),l.a.createElement("p",null,l.a.createElement("strong",null,"Email: ",e.email," ")),l.a.createElement("p",null,l.a.createElement("strong",null,"Admin Rights? ",e.isAdmin?"Yes":"No"," "))),l.a.createElement("div",null,l.a.createElement("button",{className:"btn ".concat(e.isAdmin?"btn-danger":"btn-success"),onClick:e.handleTogglePermission,"data-id":e.id,"data-is-admin":e.isAdmin},e.isAdmin?"Revoke Admin":"Make Admin"),l.a.createElement("button",{style:{marginLeft:"10px"},className:"btn btn-danger","data-id":e.id,onClick:e.handleDelete},"Delete"))))},Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){S.a.get("/api/v1/employees/all").then(function(e){return a.setState({employees:e.data},function(){var e=0;a.state.employees.forEach(function(t){t.isAdmin&&e++}),a.setState({adminCount:e})})})},a.componentDidMount=function(){var e=setInterval(function(){S.a.get("/api/v1/employees/all").then(function(e){return a.setState({employees:e.data},function(){var e=0;a.state.employees.forEach(function(t){t.isAdmin&&e++}),a.setState({adminCount:e})})})},15e3);a.setState({interval:e})},a.componentWillUnmount=function(){clearInterval(a.state.interval)},a.handleTabSelect=function(e){for(var t=e.target,a=document.getElementsByClassName("tab-link"),n=0;n<a.length;n++)a[n].setAttribute("class","tab-link");t.parentElement.setAttribute("class","active tab-link")},a.handleDelete=function(e){var t=e.target.getAttribute("data-id");S.a.delete("/api/v1/employees/delete/".concat(t)).then(function(e){S.a.get("/api/v1/employees/all").then(function(e){return a.setState({parts:e.data})})})},a.handleTogglePermission=function(e){var t=e.target.getAttribute("data-id"),n=e.target.getAttribute("data-is-admin"),l=a.state.adminCount;if("true"===n){if(l<=1)return void alert("You must have at least one user with admin privileges");l--}else l++;a.setState({adminCount:l}),S.a.put("/api/v1/employees/togglepermission",{id:t,isAdmin:n}).then(function(e){S.a.get("/api/v1/employees/all").then(function(e){return a.setState({employees:e.data})})})},a.render=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("ul",{className:"nav nav-pills"},l.a.createElement("li",{role:"presentation",className:"active tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{to:"/admin/employees/view"},"View")),l.a.createElement("li",{role:"presentation",className:"tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{to:"/admin/employees/create"},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{path:"/admin/employees/create",component:K}),l.a.createElement(I.a,{path:"/admin/employees/view",component:function(){return l.a.createElement(F,{employees:a.state.employees,handleTogglePermission:a.handleTogglePermission,handleDelete:a.handleDelete})}}))},a.state={employees:[],interval:0,adminCount:0},a}return Object(d.a)(t,e),t}(l.a.Component),U=a(41),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data})})},a.closeModal=function(){a.setState({showModal:!1,newStation:null},function(){document.getElementById("name-input").value=""})},a.showModal=function(){a.setState({showModal:!0})},a.handleAdd=function(e){e.preventDefault(),null!==a.state.newStation&&S.a.post("/api/v1/stations/create",{stationName:a.state.newStation}).then(function(e){S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data,showModal:!1})})})},a.handleInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(U.a)({},t,n))},a.handleDelete=function(e){var t=e.target.getAttribute("data-id");S.a.put("/api/v1/stations/remove",{id:t}).then(function(e){S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data})})})},a.state={stations:[],showModal:!1,newStation:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Station Name"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,this.state.stations.map(function(t,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,t.name),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-danger","data-id":t.id,onClick:e.handleDelete},"Remove")))}),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-success",onClick:this.showModal},"Add Station"))))),l.a.createElement(k.a,{show:this.state.showModal,onHide:this.closeModal},l.a.createElement(k.a.Header,{closeButton:!0},l.a.createElement(k.a.Title,null,"Add Station")),l.a.createElement(k.a.Body,null,l.a.createElement("form",null,l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"name"},"Station Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"name-input",name:"newStation",placeholder:"ie: Press Brake","aria-describedby":"name",onChange:this.handleInput})),l.a.createElement("div",{className:"input-group",style:{marginTop:"5px"}},l.a.createElement("button",{className:"btn btn-primary",onClick:this.handleAdd},"Add Station")))))))}}]),t}(l.a.Component),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).clear=function(){document.getElementById("selector").selectedIndex=0,document.getElementById("notes").value="",document.getElementById("qty").value="",a.setState({job:{part:"Selecta a Part",quantity:0,notes:""}})},a.componentWillMount=function(){S.a.get("/api/v1/parts/all").then(function(e){return a.setState({parts:e.data})})},a.handleSelectChange=function(e){var t=e.target.value,n=e.target.children[e.target.selectedIndex].text,l=Object.assign(a.state.job);l.part={id:t,name:n},a.setState({job:l,errMsg:""})},a.handleInput=function(e){var t=e.target.name,n=Object.assign(a.state.job);n[t]=e.target.value,a.setState({job:n,errMsg:""})},a.handleSubmit=Object(H.a)(R.a.mark(function e(){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("Select a Part"===a.state.job.part||a.state.job.quantity<1)){e.next=3;break}return a.setState({errMsg:"Please make sure you have selected a Part and set a Quantity"}),e.abrupt("return");case 3:S.a.post("/api/v1/workorders/create",{job:a.state.job}).then(function(e){a.clear()});case 4:case"end":return e.stop()}},e,this)})),a.state={parts:[],job:{part:"Select a Part",quantity:0,notes:""}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("form",{id:"job-form",action:"/api/v1/work-orders/test",method:"POST"},l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"job-number-addon"},"Job ID"),l.a.createElement("span",{name:"id",id:"job-id",className:"form-control","aria-describedby":"job-number-addon"},this.state.id?this.state.id:"New Part")),l.a.createElement("br",null),l.a.createElement(A.a,null,l.a.createElement(M.a,null,"Parts"),l.a.createElement(x.a,{componentClass:"select",placeholder:"Select a part",onChange:this.handleSelectChange,id:"selector"},l.a.createElement("option",null,"Select a Part"),this.state.parts.map(function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)}))),l.a.createElement("div",{className:"input-group"},l.a.createElement("span",{className:"input-group-addon",id:"job-quantity-addon"},"Quantity"),l.a.createElement("input",{name:"quantity",type:"number",className:"form-control",id:"qty",onChange:this.handleInput})),l.a.createElement("div",{className:"input-group",style:{marginTop:"10px"}},l.a.createElement("span",{className:"input-group-addon",id:"text-area-addon"},"Notes"),l.a.createElement("textarea",{name:"notes",id:"notes",onChange:this.handleInput,style:{height:"120px"},className:"form-control","aria-describedby":"text-area-addon"})))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("button",{className:"btn btn-success",onClick:this.handleSubmit},"Submit"),l.a.createElement("button",{className:"btn btn-danger",onClick:this.clear},"Clear")),l.a.createElement("div",{className:"row"},l.a.createElement("h3",{style:{color:"red"}},this.state.errMsg)))}}]),t}(l.a.Component),G=a(45);a(59),a(108);var Z=function(e){return l.a.createElement("div",{className:"row"},e.jobs.map(function(t,a){return l.a.createElement(X,{key:a,title:t.id.slice(t.id.length-4,t.id.length),job:t,viewAttachment:e.viewAttachment})}))},X=function(e){return l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"thumbnail"},l.a.createElement("div",{className:"caption"},l.a.createElement("h3",{className:"card-title"},e.title),l.a.createElement("p",null,l.a.createElement("strong",null,"Part: "),l.a.createElement("span",null,e.job.part.name)),l.a.createElement("p",null,l.a.createElement("strong",null,"Quantity: "),l.a.createElement("span",null,e.job.quantity)),l.a.createElement("p",null,l.a.createElement("strong",null,"Current Station: "),l.a.createElement("span",null,e.job.currentStation.name)),l.a.createElement("button",{className:"btn btn-primary","data-filepath":"".concat(e.job.part.id,"/").concat(e.job.part.filename),onClick:e.viewAttachment},"View Attachment"))))},$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){S.a.get("/api/v1/workorders/active").then(function(e){return a.setState({jobs:e.data})});var e=setInterval(function(){S.a.get("/api/v1/workorders/active").then(function(e){return a.setState({jobs:e.data})})},15e3);a.setState({interval:e})},a.componentWillUnmount=function(){clearInterval(a.state.interval)},a.handleTabSelect=function(e){for(var t=e.target,a=document.getElementsByClassName("tab-link"),n=0;n<a.length;n++)a[n].setAttribute("class","tab-link");t.parentElement.setAttribute("class","active tab-link")},a.viewAttachment=function(e){G.storage().ref(e.target.getAttribute("data-filepath")).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.render=function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("ul",{className:"nav nav-pills"},l.a.createElement("li",{role:"presentation",className:"active tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{to:"/admin/jobs/view"},"View")),l.a.createElement("li",{role:"presentation",className:"tab-link",onClick:a.handleTabSelect},l.a.createElement(N.a,{to:"/admin/jobs/create"},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(I.a,{path:"/admin/jobs/create",component:z}),l.a.createElement(I.a,{path:"/admin/jobs/view",component:function(){return l.a.createElement(Z,{jobs:a.state.jobs,viewAttachment:a.viewAttachment})}}))},a.state={jobs:[],interval:0},a}return Object(d.a)(t,e),t}(l.a.Component);function _(e){var t=0,a=0,n=0;return(t=Math.floor(e/60/60))<10&&(t="0".concat(t)),(a=e>=3600?Math.floor(e%3600/60):Math.floor(e/60))<10&&(a="0".concat(a)),(n=e%60)<10&&(n="0".concat(n)),"".concat(t,":").concat(a,":").concat(n)}var ee=0,te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).viewHistory=function(e){var t=e.target.getAttribute("data-id");ee=0,a.state.workOrders.forEach(function(e){e.id===t&&a.setState({currentWorkOrder:e,showModal:!0},function(){return console.log(a.state.currentWorkOrder.history)})})},a.handleClose=function(){return a.setState({showModal:!1})},a.state={stations:[],workOrders:[],currentWorkOrder:null,showModal:!1,activeSations:!1},S.a.get("/api/v1/stations/all").then(function(e){return a.setState({stations:e.data},function(){S.a.get("/api/v1/workorders/active").then(function(e){return a.setState({workOrders:e.data},function(){var e=a.state.stations.slice(0),t=[];e.forEach(function(e,n){var l=0;a.state.workOrders.forEach(function(t){t.currentStation.id===e.id&&l++}),0===l&&t.push(n)}),t.forEach(function(t){e[t]=null});var n=[];e.forEach(function(e){null!=e&&n.push(e)}),a.setState({activeStations:n})})})})}),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(e){var t=this;return this.state.activeStations?l.a.createElement("div",{className:"container"},this.state.activeStations.map(function(e,a){return l.a.createElement("div",{key:a,className:"row"},l.a.createElement("h2",null,e.name),l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Job ID"),l.a.createElement("th",null,"Part Name"),l.a.createElement("th",null,"Quantity"))),l.a.createElement("tbody",null,t.state.workOrders.map(function(a,n){return a.currentStation.id===e.id?l.a.createElement("tr",{key:n},l.a.createElement("td",null,a.id.slice(a.id.length-4,a.id.length)),l.a.createElement("td",null,a.part.name),l.a.createElement("td",null,a.quantity),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-primary","data-id":a.id,onClick:t.viewHistory},"View History"))):null}))))}),l.a.createElement(k.a,{show:this.state.showModal,onHide:this.handleClose},l.a.createElement(k.a.Header,{closeButton:!0},l.a.createElement(k.a.Title,null,"Job History")),l.a.createElement(k.a.Body,null,this.state.currentWorkOrder?l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Station"),l.a.createElement("th",null,"Employee Name"),l.a.createElement("th",null,"Time"),l.a.createElement("th",null,"Total Time"))),l.a.createElement("tbody",null,this.state.currentWorkOrder.history.map(function(e,t){return ee+=e.time,l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.stationName),l.a.createElement("td",null,e.employeeName),l.a.createElement("td",null,_(e.time)),l.a.createElement("td",null,_(ee)))}))):""))):"Loading..."}}]),t}(l.a.Component),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){e.preventDefault();var t=e.target.getAttribute("data-ref");document.getElementById(t).click()},a.handleLogout=function(){S.a.post("/api/v1/auth/logout").then(function(e){!0===e.data.signedOut&&(sessionStorage.clear(),window.location.replace("/"))})},a.render=function(e){return l.a.createElement(j.a,null,l.a.createElement("div",null,l.a.createElement(p.a,{inverse:!0,collapseOnSelect:!0},l.a.createElement(p.a.Header,null,l.a.createElement(p.a.Brand,null,l.a.createElement("a",{href:"/","data-ref":"admin",onClick:a.handleClick},sessionStorage.getItem("username"))),l.a.createElement(p.a.Toggle,null)),l.a.createElement(p.a.Collapse,null,l.a.createElement(h.a,null,l.a.createElement(g.a,{eventKey:1,"data-ref":"stations",title:"Work Stations",onClick:a.handleClick},"Work Stations")),l.a.createElement(h.a,null,l.a.createElement(g.a,{eventKey:2,"data-ref":"jobs",title:"Jobs",onClick:a.handleClick},"Jobs")),l.a.createElement(h.a,null,l.a.createElement(g.a,{eventKey:3,title:"parts","data-ref":"parts",onClick:a.handleClick},"Parts")),l.a.createElement(h.a,null,l.a.createElement(g.a,{eventKey:4,"data-ref":"employees",title:"Employees",onClick:a.handleClick},"Employees")),l.a.createElement(h.a,{pullRight:!0},l.a.createElement(g.a,{eventKey:2,"data-ref":"logout",onClick:a.handleLogout},"Logout")))),l.a.createElement(N.a,{to:"/admin/parts/view",id:"parts"}),l.a.createElement(N.a,{to:"/admin/stations",id:"stations"}),l.a.createElement(N.a,{to:"/admin/jobs/view",id:"jobs"}),l.a.createElement(N.a,{to:"/admin/employees/view",id:"employees"}),l.a.createElement(N.a,{to:"/admin",id:"admin"}),l.a.createElement(N.a,{to:"/",id:"logout"}),l.a.createElement(I.a,{path:"/admin/stations",component:Y}),l.a.createElement(I.a,{path:"/admin/parts",component:J}),l.a.createElement(I.a,{path:"/admin/employees",component:Q}),l.a.createElement(I.a,{path:"/admin/jobs",component:$}),l.a.createElement(I.a,{exact:!0,path:"/admin",component:te})))},a.state={ref:null,username:null},a}return Object(d.a)(t,e),t}(l.a.Component),ne=(a(231),a(45));a(233),ne.auth().setPersistence(ne.auth.Auth.Persistence.SESSION);var le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleStationSelect=function(e){S.a.get("/api/v1/workorders/active/".concat(e.target.getAttribute("data-id"))).then(function(e){var t=[];e.data.forEach(function(e){return t.push(Object(c.a)({},e,{inProgress:!1}))}),a.setState({workOrders:t})})},a.state={isLoggedIn:!1,stations:[],workOrders:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.a.post("/api/v1/auth/verify",{token:sessionStorage.getItem("token")}).then(function(t){t.data.uid===sessionStorage.getItem("uid")?e.setState({isLoggedIn:!0}):sessionStorage.clear()}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return"true"!==sessionStorage.getItem("isAdmin")?l.a.createElement("div",{className:"c"},l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"You are not an Admin"),l.a.createElement(N.a,{to:"/employee"},"Go to Employee Page"))):this.state.isLoggedIn?l.a.createElement("div",null,l.a.createElement(ae,{stations:this.state.stations,handleStationSelect:this.handleStationSelect})):l.a.createElement("div",{className:"d"},l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"You are not logged in"),l.a.createElement(N.a,{to:"/"},"login")))}}]),t}(l.a.Component),re=(a(235),a(252)),oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(U.a)({},t,n))},a.handleCheckBox=function(e){var t=e.target.checked;a.setState({rememberMe:t})},a.handleSubmit=function(e){a.setState({err:{}}),e.preventDefault(),S.a.post("api/v1/auth/login",{email:a.state.email,password:a.state.password}).then(function(e){e.data.err?a.setState({err:e.data.err}):(!0===a.state.rememberMe?localStorage.setItem("email",a.state.email):localStorage.removeItem("email"),sessionStorage.setItem("isAdmin",e.data.isAdmin),sessionStorage.setItem("uid",e.data.uid),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("username",e.data.name),a.setState({isAdmin:e.data.isAdmin}))})},a.state={err:null,email:localStorage.getItem("email")||null,password:null,rememberMe:!!localStorage.getItem("email")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.email&&(document.getElementById("exampleCheck1").click(),document.getElementById("exampleInputEmail1").value=this.state.email)}},{key:"render",value:function(e){return!0===this.state.isAdmin?l.a.createElement(re.a,{to:"/admin"}):!1===this.state.isAdmin?l.a.createElement(re.a,{to:"/employee"}):l.a.createElement("div",{className:"form-align"},l.a.createElement("form",{className:"loginForm"},l.a.createElement("div",null,l.a.createElement("h3",null,"Sign In")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),l.a.createElement("input",{name:"email",onChange:this.handleInput,type:"email",className:"form-control",id:"exampleInputEmail1",placeholder:"Enter Email"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),l.a.createElement("input",{name:"password",onChange:this.handleInput,type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{name:"rememberMe",onChange:this.handleCheckBox,type:"checkbox",className:"form-check-input",id:"exampleCheck1"}),l.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"Remember me")),l.a.createElement("button",{type:"Submit",className:"btn btn-primary",onClick:this.handleSubmit},"Submit")),l.a.createElement("h5",{style:{color:"red"}},this.state.err?this.state.err.message:""))}}]),t}(l.a.Component),ce=(a(237),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"a"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-3"},l.a.createElement(oe,null)))))}}]),t}(l.a.Component)),ie=(a(239),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"z"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-3"},l.a.createElement("h1",null,"404: Page not Found"),l.a.createElement(N.a,{to:"/"},"Return to login")))))}}]),t}(l.a.Component)),se=function(e){return l.a.createElement(j.a,null,l.a.createElement("div",null,l.a.createElement(C.a,null,l.a.createElement(I.a,{exact:!0,path:"/",component:ce}),l.a.createElement(I.a,{path:"/admin",component:le}),l.a.createElement(I.a,{exact:!0,path:"/employee",component:O}),l.a.createElement(I.a,{component:ie}))))};o.a.render(l.a.createElement(se,null),document.getElementById("root"))}},[[117,2,1]]]);
//# sourceMappingURL=main.c051e9b3.chunk.js.map