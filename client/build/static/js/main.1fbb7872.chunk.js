(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(79)},75:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),c=a.n(l),s=a(11),o=a(15),i=a.n(o),m=a(18),d=a(5),u=a(6),h=a(8),E=a(7),p=a(9),f=a(2),v=a.n(f),g=a(3),w=a.n(g),N=a(80),b=a(19),y=a.n(b);a(24);function S(e){var t=0,a=0,n=0;return(t=Math.floor(e/60/60))<10&&(t="0".concat(t)),(a=e>=3600?Math.floor(e%3600/60):Math.floor(e/60))<10&&(a="0".concat(a)),(n=e%60)<10&&(n="0".concat(n)),"".concat(t,":").concat(a,":").concat(n)}var k=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"left"},e.workOrder.part.name),r.a.createElement("h3",{className:"right"},S(e.time))),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Order Quantity: ",e.workOrder.quantity),r.a.createElement("h5",null,"Remaining: ",e.workOrder.quantity-e.workOrder.partialQty)),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},e.modalErr)),r.a.createElement("div",{className:"row"},r.a.createElement("hr",null),r.a.createElement("button",{className:"btn-flat blue-text waves-effect waves-light",onClick:function(){return e.viewAttachment("".concat(e.workOrder.part.id,"/").concat(e.workOrder.part.filename))}},"Attachment"),r.a.createElement("button",{className:"btn-flat red-text waves-effect waves-light right",onClick:e.handleStop},"Stop"),r.a.createElement("button",{className:"btn-flat green-text waves-effect waves-light right",onClick:e.handleFinish},"Finish")))},O=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"left"},e.workOrder.part.name),r.a.createElement("h3",{className:"right"},S(e.time))),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"How many parts did you complete?"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",name:"partsCompleted",onChange:e.handleTextChange,value:e.partsCompleted}),r.a.createElement("label",{htmlFor:"partsCompleted"},"Parts completed")),r.a.createElement("div",{className:"row"},r.a.createElement("h6",{className:"red-text left"},e.modalErr),r.a.createElement("button",{className:"btn-flat blue-text waves-effect waves-light right",onClick:e.handleReview},"Done"))))},C=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).logout=function(){v.a.post("api/v1/auth/logout").then(function(e){sessionStorage.clear()})},a.sortWorkOrders=function(){if(a.state.stations&&a.state.workOrders){var e=document.querySelector("select").value;a.state.stations.forEach(function(t){t.id===e&&a.setState({selectedStation:t})});var t=[];a.state.workOrders.forEach(function(a){a.currentStation.id===e&&t.push(a)}),a.setState({sortedWorkOrders:t})}},a.componentWillMount=function(){var e=JSON.parse(sessionStorage.getItem("userInfo"));e?a.setState({isAdmin:e.isAdmin,username:e.name,userInfo:e}):a.props.history.replace("/")},a.componentDidMount=function(){a.handleRefresh();var e=document.getElementById("slide-out");w.a.Sidenav.init(e);var t=document.getElementById("modal");w.a.Modal.init(t,{dismissible:!1})},a.componentDidUpdate=function(){var e=document.querySelector("select");w.a.FormSelect.init(e)},a.handleRefresh=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/v1/stations/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({stations:e.data})});case 2:return e.next=4,v.a.get("/api/v1/workorders/active").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({workOrders:e.data})});case 4:a.sortWorkOrders();case 5:case"end":return e.stop()}},e,this)})),a.handleReview=function(){var e=parseInt(a.state.partsCompleted);if(null===e||isNaN(e))a.setState({modalErr:"Parts Completed must be a number"});else if(e>a.state.selectedWorkOrder.quantity-a.state.selectedWorkOrder.partialQty||e<0)a.setState({modalErr:"Parts Completed must be between 0 and ".concat(a.state.selectedWorkOrder.quantity-a.state.selectedWorkOrder.partialQty)});else if(e!==parseInt(a.state.selectedWorkOrder.quantity)-parseInt(a.state.selectedWorkOrder.partialQty)){var t=Object.assign(a.state.selectedStation);t.time=a.state.counter,v.a.put("/api/v1/workorders/update/".concat(a.state.selectedWorkOrder.id),{currentStation:t,uid:a.state.userInfo.uid,username:a.state.userInfo.name,partsCompleted:e,partialQty:parseInt(a.state.selectedWorkOrder.partialQty)+e}).then(function(e){e.data.err?a.setState({err:e.data.err}):(a.handleRefresh(),a.hideModal(),a.setState({reviewing:!1,modalErr:null,partsCompleted:""}))})}else a.handleFinish()},a.handleFinish=function(){clearInterval(a.state.timer);var e=Object.assign(a.state.selectedWorkOrder);e.currentStation.time=a.state.counter,v.a.put("api/v1/workorders/next",{currentWorkOrder:e,uid:a.state.userInfo.uid,username:a.state.userInfo.name,partsCompleted:parseInt(a.state.partsCompleted)}).then(function(e){e.data.err?a.setState({err:e.data.err}):(a.handleRefresh(),a.hideModal(),a.setState({reviewing:!1,modalErr:null,partsCompleted:""}))})},a.handleStart=function(e){a.setState({selectedWorkOrder:e}),a.showModal();var t=setInterval(function(){a.setState(function(e){return{counter:e.counter+1}})},1e3);a.setState({timer:t})},a.handleStop=function(){clearInterval(a.state.timer),a.setState({reviewing:!0,modalErr:null})},a.handlePut=function(){v.a.put("/api/v1/workorders/next",{currentWorkOrder:a.state.selectedWorkOrder,uid:a.state.userInfo.uid,username:a.state.userInfo.name,partsCompleted:0})},a.showModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstance(e).open()},a.hideModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstance(e).close()},a.handleTextChange=function(e){var t,n=e.target.name,r=e.target.value,l=null;!r||isNaN(r)?l="Parts Completed must be a number":(r>a.state.selectedWorkOrder.quantity-a.state.selectedWorkOrder.partialQty||r<0)&&(l="Parts Completed must be between 0 and ".concat(a.state.selectedWorkOrder.quantity-a.state.selectedWorkOrder.partialQty)),a.setState((t={},Object(s.a)(t,n,r),Object(s.a)(t,"modalErr",l),t))},a.viewAttachment=function(e){y.a.storage().ref(e).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.state={username:null,stations:null,selectedStation:null,workOrders:null,sortedWorkOrders:null,selectedWorkOrder:{part:{name:"work order not loaded"},quantity:"work order not loaded",partialQty:"work order not loaded"},err:null,modalErr:null,counter:0,timer:null,userInfo:null,reviewing:!1,partsCompleted:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper teal darken-4"},r.a.createElement(N.a,{to:"/employee",className:"brand-logo"},this.state.username),r.a.createElement("a",{href:"/","data-target":"slide-out",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{id:"navbar",className:"right hide-on-med-and-down"},this.state.isAdmin?r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin"},"Go to Admin Page")):null,r.a.createElement("li",null,r.a.createElement(N.a,{to:"/",onClick:this.logout},"Logout"))))),r.a.createElement("ul",{id:"slide-out",className:"sidenav"},this.state.isAdmin?r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin"},"Go to Admin Page")):null,r.a.createElement("li",null,r.a.createElement(N.a,{to:"/",onClick:this.logout},"Logout"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"22px"}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{onChange:this.sortWorkOrders},this.state.stations?this.state.stations.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}):r.a.createElement("option",{disabled:!0},"Unable to Load Stations")),r.a.createElement("label",null,"Select a Station"))),r.a.createElement("div",{className:"row"},this.state.sortedWorkOrders?this.state.sortedWorkOrders.map(function(t,a){return r.a.createElement("div",{key:a,className:"col s12 m4 l3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",null,t.part.name),r.a.createElement("p",null,"Order quantity: ",t.quantity),r.a.createElement("p",null,"Remaining quantity: ",t.quantity-t.partialQty),r.a.createElement("p",null,"Notes: ",t.notes)),r.a.createElement("div",{className:"card-action"},r.a.createElement("a",{href:"/",className:"green-text",onClick:function(a){a.preventDefault(),e.handleStart(t)}},"Start"))))}):null),r.a.createElement("div",{id:"modal",className:"modal"},this.state.reviewing?r.a.createElement(O,{workOrder:this.state.selectedWorkOrder,time:this.state.counter,modalErr:this.state.modalErr,handleTextChange:this.handleTextChange,handleReview:this.handleReview,partsCompleted:this.state.partsCompleted}):r.a.createElement(k,{workOrder:this.state.selectedWorkOrder,time:this.state.counter,modalErr:this.state.modalErr,handleStop:this.handleStop,viewAttachment:this.viewAttachment,handleFinish:this.handleFinish}))))}}]),t}(r.a.Component),x=a(81),I=a(82),j=a(83),M=0;function A(e){var t=0,a=0,n=0;return(t=Math.floor(e/60/60))<10&&(t="0".concat(t)),(a=e>=3600?Math.floor(e%3600/60):Math.floor(e/60))<10&&(a="0".concat(a)),(n=e%60)<10&&(n="0".concat(n)),"".concat(t,":").concat(a,":").concat(n)}var D=function(e){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Part Name"),r.a.createElement("th",null,"Order Qty"),r.a.createElement("th",null,"Remaining Qty"),r.a.createElement("th",null))),r.a.createElement("tbody",null,e.workorders.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.part.name),r.a.createElement("td",null,t.quantity),r.a.createElement("td",null,t.quantity-t.partialQty),r.a.createElement("td",null,r.a.createElement("button",{className:"btn-flat blue-text grey lighten-5 waves-effect waves-light blue",onClick:function(){return e.handleHistory(t)}},"History")))})))},R=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.handleRefresh();var e=document.getElementById("modal");w.a.Modal.init(e)},a.sortWorkOrders=function(e,t){if(e&&t){var n=[];e.forEach(function(e){var a={name:e.name,workorders:[]},r=!1;t.forEach(function(t){t.currentStation.id===e.id&&(r=!0,a.workorders.push(t))}),r&&n.push(a)}),a.setState({sortedOrders:n})}else a.setState({err:{message:"Station and Work Order data could not be accessed."}})},a.handleRefresh=Object(m.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/v1/workorders/active").then(function(e){e.data.err?a.setState({err:e.data.err}):n=e.data}).catch(function(e){return a.setState({err:e})});case 2:return e.next=4,v.a.get("/api/v1/stations/all").then(function(e){e.data.err?a.setState({err:e.data.err}):t=e.data}).catch(function(e){return a.setState({err:e})});case 4:a.sortWorkOrders(t,n);case 5:case"end":return e.stop()}},e,this)})),a.handleHistory=function(){var e=Object(m.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M=0,n=document.getElementById("modal"),r=w.a.Modal.getInstance(n),e.next=5,a.setState({currentHistory:t.history});case 5:r.open();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={workOrders:null,stations:null,sortedOrders:null,currentHistory:null,err:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.sortedOrders?this.state.sortedOrders.map(function(t,a){return r.a.createElement("div",{key:a,className:"row"},r.a.createElement("h3",null,t.name),r.a.createElement(D,{workorders:t.workorders,handleHistory:e.handleHistory}),r.a.createElement("div",{style:{height:"60px"}}))}):null,r.a.createElement("div",{id:"modal",className:"modal"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"12px"}})),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Part History")),r.a.createElement("div",{className:"row"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Station"),r.a.createElement("th",null,"Employee"),r.a.createElement("th",null,"Elapsed Time"),r.a.createElement("th",null,"Parts Completed"),r.a.createElement("th",null,"Total Elapsed Time"))),r.a.createElement("tbody",null,this.state.currentHistory?this.state.currentHistory.map(function(e,t){return M+=e.time,r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.stationName),r.a.createElement("td",null,e.employeeName),r.a.createElement("td",null,A(e.time)),r.a.createElement("td",null,e.partsCompleted),r.a.createElement("td",null,A(M)))}):null))))))}}]),t}(r.a.Component),W=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.handleRefresh();var e=document.getElementById("modal");w.a.Modal.init(e)},a.handleRefresh=function(){v.a.get("/api/v1/stations/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({stations:e.data})}).catch(function(e){return a.setState({err:e})})},a.handleStationDelete=function(e){v.a.put("/api/v1/stations/remove",{id:e}).then(function(e){e.data.err?a.setState({err:e.data.err}):a.handleRefresh()}).catch(function(e){return a.setState({err:e})})},a.handleTextInput=function(e){var t,n=e.target.name,r=e.target.value;a.setState((t={},Object(s.a)(t,n,r),Object(s.a)(t,"modalErr",""),t))},a.handleSubmit=function(e){e.preventDefault(),a.handleStationCreate(a.state.name)},a.handleStationCreate=function(e){!e||e.length<4?a.setState({modalErr:"Station names must be at least 4 letters long."}):(v.a.post("/api/v1/stations/create",{stationName:e}).then(function(e){e.data.err?a.setState({err:e.data.err}):a.handleRefresh()}).catch(function(e){return a.setState({err:e})}),a.clear(),a.hideModal())},a.showModal=function(e){e.preventDefault();var t=document.getElementById("modal");w.a.Modal.getInstance(t).open()},a.hideModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstance(e).close()},a.clear=function(){a.setState({name:""})},a.state={stations:null,name:"",err:null,modalErr:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"fixed-action-btn right"},r.a.createElement("a",{href:"/",className:"btn-floating blue waves-effect waves-light",onClick:this.showModal},r.a.createElement("i",{className:"material-icons"},"add")))),r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:"red-text"},this.state.err?this.state.err.message:null)),r.a.createElement("div",{className:"row"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Station Name"),r.a.createElement("th",null,"Remove Station"))),r.a.createElement("tbody",null,this.state.stations?this.state.stations.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("button",{className:"btn waves-effect waves-light red-text btn-flat grey lighten-5",onClick:function(){return e.handleStationDelete(t.id)}},"Delete")))}):null))),r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h4",null,"Create New Station"),r.a.createElement("form",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:this.handleTextInput,value:this.state.name}),r.a.createElement("label",{htmlFor:"name"},"Station Name"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn waves-effect waves-light blue",onClick:this.handleSubmit},"Create"))),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},this.state.modalErr?this.state.modalErr:null))))))}}]),t}(r.a.Component),q=a(19);a(24);q.initializeApp({apiKey:"AIzaSyAZB-qbjpKVRvaQt17kPsPTMav3O12by6k",authDomain:"project-runner-f1bdc.firebaseapp.com",databaseURL:"https://project-runner-f1bdc.firebaseio.com",projectId:"project-runner-f1bdc",storageBucket:"project-runner-f1bdc.appspot.com",messagingSenderId:"757776283780"});var P=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.handleRefresh();var e=document.getElementById("modal"),t=document.querySelector("select");w.a.Modal.init(e),w.a.FormSelect.init(t)},a.componentDidUpdate=function(){var e=document.querySelector("select");w.a.FormSelect.init(e)},a.handleRefresh=function(){v.a.get("/api/v1/parts/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({parts:e.data})}).catch(function(e){return a.setState({err:e})}),v.a.get("/api/v1/stations/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({stations:e.data},function(){return console.log})}).catch(function(e){return a.setState({err:e})})},a.handleTextChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(s.a)({},t,n))},a.handleSelectChange=function(e){var t=e.target,n=w.a.FormSelect.getInstance(t),r=[];n.getSelectedValues().forEach(function(e){return r.push(JSON.parse(e))}),a.setState({newPartStations:r},function(){return console.log(a.state)})},a.handleDelete=function(e){v.a.put("/api/v1/parts/archive/".concat(e)).then(function(e){e.data.err?a.setState({err:e.data.err}):a.handleRefresh()}).catch(function(e){return a.setState({err:e})})},a.showModal=function(e){e.preventDefault();var t=document.getElementById("modal");w.a.Modal.getInstance(t).open()},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.newPartStations||a.state.newPartStations.length<1)a.setState({errModal:"Please select a minimum of one station"});else if(!a.state.name||a.state.name.length<4)a.setState({errModal:"Part Names must be at least 4 letters long"});else{var t=document.getElementById("attachment").files[0];if(void 0!==t){var n=new FileReader;n.onloadend=function(e){var n=new Blob([e.target.result],{type:t.type});v.a.post("/api/v1/parts/create",{part:{name:a.state.name,stations:a.state.newPartStations,filename:t.name}}).then(function(e){if(e.data.err)a.setState({err:e.data.err});else{var r=q.storage().ref("/".concat(e.data.newPartID,"/").concat(t.name));console.log(r),r.put(n).then(function(){return console.log("file successfully uploaded")},function(){return a.setState({err:{message:"An unknown error occured during file upload"}})})}}).catch(function(e){return a.setState({err:e})})},n.readAsArrayBuffer(t)}else v.a.post("/api/v1/parts/create",{part:{name:a.state.name,stations:a.state.newPartStations,filename:"no file"}}).then(function(e){e.data.err&&a.setState({err:e.data.err})}).catch(function(e){return a.setState({err:e})});a.handleRefresh(),a.clear();var r=document.getElementById("modal");w.a.Modal.getInstance(r).close()}},a.viewAttachment=function(e){q.storage().ref(e).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.clear=function(){document.querySelectorAll("input[type=text]").forEach(function(e){return e.value=""}),document.querySelectorAll("input[type=checkbox]").forEach(function(e){!0===e.checked&&e.click()})},a.state={parts:null,stations:null,err:null,errModal:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,this.state.err?this.state.err.message:null)),r.a.createElement("div",{className:"fixed-action-btn"},r.a.createElement("a",{href:"/",className:"btn-floating waves-effect waves-light blue",onClick:this.showModal},r.a.createElement("i",{className:"material-icons"},"add"))),r.a.createElement("div",{className:"row"},this.state.parts?this.state.parts.map(function(t,a){return r.a.createElement("div",{key:a,className:"col s12 m4 l3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",null,t.name),t.stations.map(function(e,t){return r.a.createElement("p",{key:t},e.name)})),r.a.createElement("div",{className:"card-action"},r.a.createElement("a",{href:"/",className:"blue-text",onClick:function(a){a.preventDefault(),e.viewAttachment(t.filepath)}},"Attachment"),r.a.createElement("a",{href:"/",className:"blue-text",onClick:function(a){a.preventDefault(),e.handleDelete(t.id)}},"Delete"))))}):null),r.a.createElement("div",{id:"modal",className:"modal"},r.a.createElement("div",{className:"container",style:{minHeight:"60vh"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"12px"}})),r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:"red-text"},this.state.errModal?this.state.errModal:null)),r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,"Create New Part")),r.a.createElement("form",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{name:"name",type:"text",id:"name",onChange:this.handleTextChange}),r.a.createElement("label",{htmlFor:"name"},"Part Name"))),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn white blue-text"},r.a.createElement("span",null,"Attachment"),r.a.createElement("input",{id:"attachment",type:"file"})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{name:"filepath",className:"file-path validate",type:"text"})),r.a.createElement("div",{className:"input-field"},this.state.stations?r.a.createElement("select",{multiple:!0,onChange:this.handleSelectChange},this.state.stations.map(function(e,t){return r.a.createElement("option",{key:t,value:JSON.stringify(e)},e.name)})):r.a.createElement("p",null,"Stations Unavailable"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn waves-effect waves-light blue",onClick:this.handleSubmit},"Create New Part"))))))}}]),t}(r.a.Component),B=a(19);a(69),a(24);var F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.handleRefresh();var e=document.getElementById("modal");w.a.Modal.init(e)},a.componentDidUpdate=function(){var e=document.querySelector("select");w.a.FormSelect.init(e)},a.handleRefresh=function(){v.a.get("/api/v1/workorders/active").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({workOrders:e.data})}).catch(function(e){return a.setState({err:e})}),v.a.get("/api/v1/parts/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({parts:e.data})}).catch(function(e){return a.setState({err:e})})},a.handleTextChange=function(e){var t,n=e.target.name,r=e.target.value;a.setState((t={},Object(s.a)(t,n,r),Object(s.a)(t,"modalErr",null),t))},a.handleSelectChange=function(e){var t=document.querySelector("select"),n=JSON.parse(t.value);a.setState({part:n},function(){return console.log(a.state.part)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.part,n=parseInt(a.state.quantity);isNaN(n)||n<1?a.setState({modalErr:"Quantity must be a number."}):(a.state.part||(t=a.state.parts[0]),v.a.post("/api/v1/workorders/create",{job:{part:t,quantity:n,notes:a.state.notes}}).then(function(e){e.data.err?a.setState({err:e.data.err}):(a.handleRefresh(),a.clear(),a.hideModal())}))},a.viewAttachment=function(e){B.storage().ref(e).getDownloadURL().then(function(e){return window.open(e,"_blank")})},a.showModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstance(e).open()},a.hideModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstance(e).close()},a.clear=function(){a.setState({err:null,modalErr:null,quantity:void 0,notes:""})},a.state={workOrders:null,parts:null,part:null,quantity:void 0,notes:"",err:null,modalErr:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},this.state.err?this.state.err.message:null)),r.a.createElement("div",{className:"fixed-action-btn"},r.a.createElement("button",{className:"btn-floating blue",onClick:this.showModal},r.a.createElement("i",{className:"material-icons"},"add"))),r.a.createElement("div",{className:"row"},this.state.workOrders?this.state.workOrders.map(function(t,a){return r.a.createElement("div",{key:a,className:"col s12 m4 l3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("h5",null,t.part.name),r.a.createElement("p",null,"Date Created: ",new B.firestore.Timestamp(t.dateCreated.seconds,t.dateCreated.nanoseconds).toDate().toLocaleDateString()),r.a.createElement("p",null,"Current Station: ",t.currentStation.name),r.a.createElement("p",null,"Order Quantity: ",t.quantity),r.a.createElement("p",null,"Remaining Quantity: ",t.quantity-t.partialQty)),r.a.createElement("div",{className:"card-action"},"No File"===t.part.filename?r.a.createElement("a",{href:"/",className:"grey-text",onClick:function(e){return e.preventDefault()}},"Attachment"):r.a.createElement("a",{href:"/",className:"blue-text",onClick:function(a){a.preventDefault(),e.viewAttachment("".concat(t.part.id,"/").concat(t.part.filename))}},"Attachment"))))}):null),r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},this.state.modalErr?this.state.modalErr:null)),r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Create New Work Order")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{onChange:this.handleSelectChange},this.state.parts?this.state.parts.map(function(e,t){return r.a.createElement("option",{key:t,value:JSON.stringify(e)},e.name)}):r.a.createElement("option",{disabled:!0},"Parts Failed to Load")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",name:"quantity",id:"quantity",onChange:this.handleTextChange,value:this.state.quantity}),r.a.createElement("label",{htmlFor:"quantity"},"Quantity"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{name:"notes",id:"textarea",className:"materialize-textarea",onChange:this.handleTextChange,value:this.state.notes}),r.a.createElement("label",{htmlFor:"textarea"},"Notes"))),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn waves-effect waves-light blue",onClick:this.handleSubmit},"Create"))))),r.a.createElement("div",{style:{height:"15vh"}})))}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.handleRefresh();var e=document.getElementById("modal");w.a.Modal.init(e)},a.handleRefresh=function(){v.a.get("/api/v1/employees/all").then(function(e){e.data.err?a.setState({err:e.data.err}):a.setState({employees:e.data})})},a.toggleAdmin=function(e){a.setState({err:null});try{if(e.isAdmin){var t=0;if(a.state.employees.forEach(function(e){e.isAdmin&&t++}),t<=1)throw new Error({err:{message:"There must always be at least one user with Administrator privileges."}})}v.a.put("/api/v1/employees/togglepermission",{id:e.id,isAdmin:e.isAdmin}).then(function(e){e.data.err?a.setState({err:e.data.err}):a.handleRefresh()}).catch(function(e){return a.setState({err:{message:"There must always be at least one user with Administrator privileges."}})})}catch(n){a.setState({err:n})}},a.handleDelete=function(e){v.a.put("/api/v1/employees/archive/".concat(e)).then(function(e){e.data.err?a.setState({err:e.data.err}):a.handleRefresh()})},a.showModal=function(e){e.preventDefault();var t=document.getElementById("modal");w.a.Modal.getInstance(t).open()},a.hideModal=function(){var e=document.getElementById("modal");w.a.Modal.getInstanceI(e).close()},a.handleTextChange=function(e){var t,n=e.target.name,r=e.target.value;a.setState((t={},Object(s.a)(t,n,r),Object(s.a)(t,"modalErr",null),t))},a.handleSubmit=function(e){e.preventDefault(),v.a.post("/api/v1/auth/create",{employee:{email:a.state.email,password:a.state.password,name:a.state.name}}).then(function(e){e.data.err?a.setState({modalErr:e.data.err.message}):(a.handleRefresh(),a.clear())}).catch(function(e){return a.setState({err:e})})},a.clear=function(){a.setState({name:"",email:"",password:""})},a.state={employees:null,name:"",email:"",password:"",err:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},this.state.err?this.state.err.message:null)),r.a.createElement("div",{className:"fixed-action-btn"},r.a.createElement("a",{href:"/",className:"btn-floating blue",onClick:this.showModal},r.a.createElement("i",{className:"material-icons"},"add"))),r.a.createElement("div",{className:"row"},this.state.employees?this.state.employees.map(function(t,a){return r.a.createElement("div",{key:a,className:"col s12 m4 l3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.name),r.a.createElement("p",null,t.email)),r.a.createElement("div",{className:"card-action"},t.isAdmin?r.a.createElement("button",{className:"btn-flat red-text waves-effect waves-light",onClick:function(){return e.toggleAdmin(t)}},"Revoke Admin"):r.a.createElement("button",{className:"btn-flat green-text waves-effect waves-light",onClick:function(){return e.toggleAdmin(t)}},"Grant Admin"),r.a.createElement("button",{className:"btn-flat red-text waves-effect waves-light",onClick:function(){return e.handleDelete(t.id)}},"Delete"))))}):null),r.a.createElement("div",{id:"modal",className:"modal"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"12px"}})),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"red-text"},this.state.modalErr?this.state.modalErr:null)),r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,"Create New Employee")),r.a.createElement("div",{className:"row"},r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{name:"name",id:"name",type:"text",onChange:this.handleTextChange,value:this.state.name}),r.a.createElement("label",{htmlFor:"name"},"Name"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{name:"email",id:"email",type:"text",onChange:this.handleTextChange,value:this.state.email}),r.a.createElement("label",{htmlFor:"email"},"Email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",id:"password",name:"password",onChange:this.handleTextChange,value:this.state.password}),r.a.createElement("label",{htmlFor:"password"},"Password"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn blue waves-effect waves-light",onClick:this.handleSubmit},"Create"))))))))}}]),t}(r.a.Component),Q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentWillMount=function(){if(!a.state.isLoadedData){var e=JSON.parse(sessionStorage.getItem("userInfo"));if(!e)return void a.props.history.replace("/");v.a.post("/api/v1/auth/verify",{token:e.token}).then(function(t){t.data.err?a.setState({err:t.data.err,isLoadedData:!0}):a.setState({isLoggedIn:!0,isAdmin:e.isAdmin,username:e.name})}).catch(function(e){return a.setState({err:e,isLoggedIn:!0})})}},a.componentDidUpdate=function(){var e=document.querySelector("#slide-out");w.a.Sidenav.init(e,{draggable:!0})},a.logout=function(){v.a.post("api/v1/auth/logout").then(function(e){sessionStorage.clear()})},a.state={isLoggedIn:!1,err:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.isLoggedIn?this.state.err?r.a.createElement("h4",null,"Login Failed"):(this.state.isAdmin||this.props.history.replace("/employee"),r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper black"},r.a.createElement(N.a,{to:"/admin",className:"brand-logo"},this.state.username),r.a.createElement("a",{href:"/","data-target":"slide-out",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{id:"navbar",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin"},"Overview")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/workstations"},"Work Stations")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/parts"},"Parts")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/workorders"},"Work Orders")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/employees"},"Employees")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/employee"},"Go to Employee Page")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/",onClick:this.logout},"Logout"))))),r.a.createElement("ul",{id:"slide-out",className:"sidenav"},r.a.createElement("li",null,r.a.createElement("h5",null,this.state.username)),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin"},"Overview")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/workstations"},"Work Stations")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/parts"},"Parts")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/workorders"},"Work Orders")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/admin/employees"},"Employees")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/employee"},"Go to Employee Page")),r.a.createElement("li",null,r.a.createElement(N.a,{to:"/",onClick:this.logout},"Logout"))),r.a.createElement(j.a,{exact:!0,path:"/admin",component:R}),r.a.createElement(j.a,{exact:!0,path:"/admin/workstations",component:W}),r.a.createElement(j.a,{exact:!0,path:"/admin/parts",component:P}),r.a.createElement(j.a,{exact:!0,path:"/admin/workorders",component:F}),r.a.createElement(j.a,{exact:!0,path:"/admin/employees",component:T}))):r.a.createElement("p",null,"Loading")}}]),t}(r.a.Component),L=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){if(null===a.state.checked){var e=JSON.parse(localStorage.getItem("credentials"));e?a.setState({email:e.email,password:e.password,checked:!0,remember:!0}):a.setState({checked:!1})}},a.handleInputChange=function(e){var t,n=e.target,r=n.value;a.setState((t={},Object(s.a)(t,n.name,r),Object(s.a)(t,"err",null),t))},a.handleCheckboxChange=function(){a.setState(function(e){return{remember:!e.remember}})},a.handleSubmit=function(e){e.preventDefault(),a.state.remember?localStorage.setItem("credentials",JSON.stringify({email:a.state.email,password:a.state.password})):localStorage.clear(),v.a.post("/api/v1/auth/login",{email:a.state.email,password:a.state.password}).then(function(e){if(e.data.err)return a.setState({err:e.data.err}),void sessionStorage.clear();var t={uid:e.data.uid,token:e.data.token,isAdmin:e.data.isAdmin,name:e.data.name};sessionStorage.setItem("userInfo",JSON.stringify(t)),a.props.history.push("/admin")}).catch(function(e){return a.setState({err:e})})},a.state={email:"",password:"",remember:!1,checked:null,err:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"20vh"}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6 offset-m3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Sign In"),r.a.createElement("form",null,r.a.createElement("div",{className:"row",onClick:function(){return document.getElementById("email").focus()}},r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"email_circle"),r.a.createElement("input",{id:"email",name:"email",type:"text",onChange:this.handleInputChange,value:this.state.email}),r.a.createElement("label",{htmlFor:"email"},"Email"))),r.a.createElement("div",{className:"row",onClick:function(){return document.getElementById("password").focus()}},r.a.createElement("div",{className:"input-field"},r.a.createElement("i",{className:"material-icons prefix"},"lock"),r.a.createElement("input",{id:"password",name:"password",type:"password",onChange:this.handleInputChange,value:this.state.password}),r.a.createElement("label",{htmlFor:"password"},"Password"))),r.a.createElement("div",{className:"row"},r.a.createElement("p",null,r.a.createElement("label",null,this.state.checked?r.a.createElement("input",{type:"checkbox",defaultChecked:!0,onChange:this.handleCheckboxChange}):r.a.createElement("input",{type:"checkbox",onChange:this.handleCheckboxChange}),r.a.createElement("span",null,"Remember Me")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn waves-effect waves-light blue",onClick:this.handleSubmit},"Sign In"))),r.a.createElement("div",{className:"row"},r.a.createElement("h6",{className:"red-text"},this.state.err?this.state.err.message:null))))))))}}]),t}(r.a.Component),H=(a(75),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"z"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("h1",null,"404: Page not Found"),r.a.createElement(N.a,{to:"/"},"Return to login")))))}}]),t}(r.a.Component)),J=(a(77),function(){return r.a.createElement(x.a,null,r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(j.a,{exact:!0,path:"/",component:L}),r.a.createElement(j.a,{path:"/admin",component:Q}),r.a.createElement(j.a,{exact:!0,path:"/employee",component:C}),r.a.createElement(j.a,{component:H}))))});c.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[34,2,1]]]);
//# sourceMappingURL=main.1fbb7872.chunk.js.map